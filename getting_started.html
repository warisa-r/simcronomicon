

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started with simcronomicon &mdash; simcronomicon 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=01f34227"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Understanding Agent Behavior and Simulation Flow" href="basic_blocks.html" />
    <link rel="prev" title="simcronomicon documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            simcronomicon
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started with simcronomicon</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-workflow">Basic Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-or-loading-a-town">Building or Loading a Town</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualizing-the-town">Visualizing the Town</a></li>
<li class="toctree-l2"><a class="reference internal" href="#defining-step-events-and-a-model">Defining Step Events and a Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-a-simulation">Running a Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualizing-simulation-results">Visualizing Simulation Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#comparing-with-ode-solution-seir-example">Comparing with ODE Solution (SEIR Example)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic_blocks.html">Understanding Agent Behavior and Simulation Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_features_movement.html">Advanced Step Events and Movement Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_features_SEIQRDV.html">Advanced Simulation Features: SEIQRDV Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_custom_infection.html">Creating Custom Infection Models: Building an SIR Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="simcronomicon.html">simcronomicon package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">simcronomicon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started with simcronomicon</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/getting_started.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started-with-simcronomicon">
<h1>Getting Started with simcronomicon<a class="headerlink" href="#getting-started-with-simcronomicon" title="Link to this heading"></a></h1>
<p>Welcome to <strong>simcronomicon</strong>! This guide will help you get started with the main features of the package, including building a town, defining disease spread models, running simulations, and visualizing results.</p>
<p>We will use the simplest and most common infection model in disease modeling throughout this tutorial, the SEIR model!</p>
<p><strong>If you have no knowledge on disease modeling, we recommend you to visit the tutorial in examples/basic_disease_spread.ipynb
so that you might have a better grasp of how epidemic agent-based modelling looks like in action.</strong></p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>We recommend using conda to install simcronomicon and its dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Clone the repository (if you haven&#39;t already)</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/warisa-r/simcronomicon.git
<span class="nb">cd</span><span class="w"> </span>simcronomicon

<span class="c1"># Create and activate the conda environment</span>
conda<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>environment.yml
conda<span class="w"> </span>activate<span class="w"> </span>simcronomicon-env

pip<span class="w"> </span>install<span class="w"> </span>.

<span class="c1"># Verify the installation</span>
python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import simcronomicon; print(simcronomicon.__version__)&quot;</span>
</pre></div>
</div>
</section>
<section id="basic-workflow">
<h2>Basic Workflow<a class="headerlink" href="#basic-workflow" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Create or load a town network</strong></p></li>
<li><p><strong>Define step events and a infection model</strong></p></li>
<li><p><strong>Run a simulation</strong></p></li>
<li><p><strong>Visualize the results</strong></p></li>
</ol>
</section>
<section id="building-or-loading-a-town">
<h2>Building or Loading a Town<a class="headerlink" href="#building-or-loading-a-town" title="Link to this heading"></a></h2>
<p>First step of running the simulation of agent-based network modeling is generating a network from a given
geographic point you want to simulate your spread on.</p>
<p>You can simply call the function <cite>from_point</cite> from the module <cite>Town</cite>
to generate the appropriate input files.</p>
<p>When a <cite>Town</cite> object is generated, a network of buildings is created with each node carrying the x and y coordinate of the building
centroids in your interested location connected with each other with edges that represent shortest path distances from each other.
Furthermore, each node that represent each location in town is also classfied to different types of buildings with the building tags
in OpenStreetMap data.</p>
<p><strong>Create from a geographic point:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">simcronomicon</span><span class="w"> </span><span class="kn">import</span> <span class="n">Simulation</span><span class="p">,</span> <span class="n">Town</span><span class="p">,</span> <span class="n">TownParameters</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">simcronomicon.infection_models</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">SEIRModel</span><span class="p">,</span> <span class="n">SEIRModelParameters</span><span class="p">,</span> <span class="n">FolkSEIR</span><span class="p">,</span>
    <span class="n">StepEvent</span><span class="p">,</span> <span class="n">EventType</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">simcronomicon.visualization</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">plot_status_summary_from_hdf5</span><span class="p">,</span>
    <span class="n">plot_place_types_scatter</span><span class="p">,</span>
    <span class="n">plot_agents_scatter</span>
<span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">simcronomicon.infection_models</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">log_normal_mobility</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">town</span> <span class="o">=</span> <span class="n">Town</span><span class="o">.</span><span class="n">from_point</span><span class="p">(</span>
    <span class="n">point</span><span class="o">=</span><span class="p">[</span><span class="mf">50.7753</span><span class="p">,</span> <span class="mf">6.0839</span><span class="p">],</span>  <span class="c1"># Aachen Dom</span>
    <span class="n">dist</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">town_params</span><span class="o">=</span><span class="n">town_params</span><span class="p">,</span>
    <span class="n">file_prefix</span><span class="o">=</span><span class="s2">&quot;aachen_dom&quot;</span><span class="p">,</span>
    <span class="n">save_dir</span><span class="o">=</span><span class="s2">&quot;./data&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>A simple town graph in <cite>.graphmlz</cite> form and its configuration file in <cite>.json</cite> form is then generated. These are important input files
for the simulation and visualization later on!</p>
<p>Since constructing a <cite>Town</cite> object can take a while (see the documentation in Town modules as to why), we also provide you an
option to create the input files and load them to use in other simulations later.</p>
<p>Note that we have not talked about <cite>town_params</cite>. <cite>town_params</cite> can be defined with the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">town_params</span> <span class="o">=</span> <span class="n">TownParameters</span><span class="p">(</span><span class="n">num_pop</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">num_init_spreader</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">spreader_initial_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>With these parameters, you get 997 agents that are susceptible to the spread and 3 that are infectious.
2 of the infectious agents are placed at node of ID 2 in the to-be-constructed graph. The other one is located at node 1.
If <cite>spreader_initial_nodes</cite> are not defined at all or not defined for all spreaders, the spreader will be placed randomly
at a node in the town_graph.</p>
<p>Even though <cite>town_params</cite> is a part of the <cite>Town</cite> object
(define geographical initial condition of the simulation), it indeed is seperated from the construction of the 2 input files
with the function <cite>from_point</cite>. This means that you can generate a town graph with one set of <cite>town_params</cite> and the town object with
your desired initial condition and 2 output files that are independent of your current initial condition. This is so that you can reuse
the input files with different initial conditions. You can do so by the function <cite>from_files</cite> in our <cite>Town</cite> module.</p>
<p><strong>Load from files:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">simcronomicon</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">scon</span>

<span class="n">town_params</span> <span class="o">=</span> <span class="n">TownParameters</span><span class="p">(</span><span class="n">num_pop</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">num_init_spreader</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">town_graph_path</span> <span class="o">=</span> <span class="s2">&quot;../test/test_data/aachen_dom_500m.graphmlz&quot;</span>
<span class="n">town_config_path</span> <span class="o">=</span> <span class="s2">&quot;../test/test_data/aachen_dom_500m_config.json&quot;</span>
<span class="n">town</span> <span class="o">=</span> <span class="n">Town</span><span class="o">.</span><span class="n">from_files</span><span class="p">(</span>
    <span class="n">config_path</span><span class="o">=</span><span class="n">town_config_path</span><span class="p">,</span>
    <span class="n">town_graph_path</span><span class="o">=</span><span class="n">town_graph_path</span><span class="p">,</span>
    <span class="n">town_params</span><span class="o">=</span><span class="n">town_params</span>
<span class="p">)</span>
</pre></div>
</div>
<p>—</p>
</section>
<section id="visualizing-the-town">
<h2>Visualizing the Town<a class="headerlink" href="#visualizing-the-town" title="Link to this heading"></a></h2>
<p>By calling the function <cite>plot_place_types_scatter</cite>, you can see the classification of <cite>place_types</cite> of the location you are interested in.
It is very important to note that unclassified nodes or the grey nodes that are tagged <cite>other</cite> will not be processed in the simulation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plot_place_types_scatter</span><span class="p">(</span><span class="n">town_graph_path</span><span class="p">,</span> <span class="n">town_config_path</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/aachen_mitte_classification.png"><img alt="Aachen town visualization showing different building types" class="align-center" src="_images/aachen_mitte_classification.png" style="width: 500px;" />
</a>
<p><em>The visualization shows different place types in the interested area with different colors</em></p>
</section>
<section id="defining-step-events-and-a-model">
<h2>Defining Step Events and a Model<a class="headerlink" href="#defining-step-events-and-a-model" title="Link to this heading"></a></h2>
<p>Step events control agent movement and interactions. You can use defaults or define your own.
Here, we define such that people in our simulation always go out and greet their neighbors and go to work
afterwards. In these event steps, if the agents have enough energy, they will go to the destined location with our specified <cite>place_types</cite>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">step_events</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">StepEvent</span><span class="p">(</span>
        <span class="s2">&quot;greet_neighbors&quot;</span><span class="p">,</span>
        <span class="n">FolkSEIR</span><span class="o">.</span><span class="n">interact</span><span class="p">,</span>
        <span class="n">EventType</span><span class="o">.</span><span class="n">DISPERSE</span><span class="p">,</span>
        <span class="mi">5000</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;accommodation&#39;</span><span class="p">]),</span>
    <span class="n">StepEvent</span><span class="p">(</span>
        <span class="s2">&quot;chore&quot;</span><span class="p">,</span>
        <span class="n">FolkSEIR</span><span class="o">.</span><span class="n">interact</span><span class="p">,</span>
        <span class="n">EventType</span><span class="o">.</span><span class="n">DISPERSE</span><span class="p">,</span>
        <span class="mi">19000</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s1">&#39;commercial&#39;</span><span class="p">,</span>
            <span class="s1">&#39;workplace&#39;</span><span class="p">,</span>
            <span class="s1">&#39;education&#39;</span><span class="p">,</span>
            <span class="s1">&#39;religious&#39;</span>
        <span class="p">],</span>
        <span class="n">log_normal_mobility</span>
    <span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Then,  they will <cite>interact</cite> with their environments and other agents in the same
location node. These interactions are what trigger the spread!</p>
<p>Here is the codeblock of the interaction function in <cite>FolkSEIR</cite> for you to see that an agent can contract a disease
exactly through attending these events. (And their energy also decreases!)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">interact</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">folks_here</span><span class="p">,</span>
            <span class="n">current_place_type</span><span class="p">,</span>
            <span class="n">status_dict_t</span><span class="p">,</span>
            <span class="n">model_params</span><span class="p">,</span>
            <span class="n">dice</span><span class="p">):</span>
        <span class="c1"># When a susceptible person comes into contact with an infectious person,</span>
        <span class="c1"># they have a likelihood to become exposed to the disease</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;S&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">inverse_bernoulli</span><span class="p">(</span>
                <span class="n">folks_here</span><span class="p">,</span> <span class="n">model_params</span><span class="o">.</span><span class="n">beta</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">dice</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="n">status_dict_t</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">energy</span> <span class="o">-=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>After these events are done, all the agents will go to sleep. This is the end of 1 simulation time step.
Note that some status transitions that are time-sensitive are triggered when <cite>sleep</cite> is activated.
Here is how the sleep function looks like for SEIR model so that you can see that an agent will transition
from being ‘E’ or exposed to ‘I’ or infectious if an amount of incubation time has passed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sleep</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">folks_here</span><span class="p">,</span>
        <span class="n">current_place_type</span><span class="p">,</span>
        <span class="n">status_dict_t</span><span class="p">,</span>
        <span class="n">model_params</span><span class="p">,</span>
        <span class="n">dice</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;E&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_step_streak</span> <span class="o">==</span> <span class="n">model_params</span><span class="o">.</span><span class="n">sigma</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="n">status_dict_t</span><span class="p">)</span>
</pre></div>
</div>
<p>After defining what an agent will go through in each day, you have to also define the way the disease “work”.
This is through defining proper model parameters. Here, <cite>beta</cite> governs how contagious the disease is,
<cite>sigma</cite> is the incubation period, and <cite>gamma</cite> is the time one needs to recover from being infectious to immune.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">model_params</span> <span class="o">=</span> <span class="n">SEIRModelParameters</span><span class="p">(</span>
    <span class="n">max_energy</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">xi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">SEIRModel</span><span class="p">(</span><span class="n">model_params</span><span class="p">,</span> <span class="n">step_events</span><span class="p">)</span>
</pre></div>
</div>
<p>—</p>
</section>
<section id="running-a-simulation">
<h2>Running a Simulation<a class="headerlink" href="#running-a-simulation" title="Link to this heading"></a></h2>
<p>This step is pretty straightforward. After the town, model, and all their parameters have been defined, we run the simulation
with the desired maximum time steps. Note that the simulation always terminates automatically when there exists no more spread carrier
in it anymore.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">(</span><span class="n">town</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>After the simulation finish running, an output file <cite>simulation_output.h5</cite> will be generated in the following structure:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>simulation_output.h5
├── metadata
│   ├── simulation_config   (JSON-encoded simulation metadata)
│   └── town_config         (JSON-encoded town metadata)
├── status_summary
│   └── summary               (dataset: structured array with timestep, current_event, and statuses)
└── individual_logs
    └── log                   (dataset: structured array with timestep, event, folk_id, status, address)
</pre></div>
</div>
</section>
<section id="visualizing-simulation-results">
<h2>Visualizing Simulation Results<a class="headerlink" href="#visualizing-simulation-results" title="Link to this heading"></a></h2>
<p>For visualization, we provide 2 functions to see how your spread develops.</p>
<ol class="arabic simple">
<li><p>Plot the compartment status summary:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plot_status_summary_from_hdf5</span><span class="p">(</span><span class="s2">&quot;simulation_output.h5&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/SEIR_plot_summary.png"><img alt="Status density plot of ABM simulation throughout all simulation time steps" class="align-center" src="_images/SEIR_plot_summary.png" style="width: 500px;" />
</a>
<p><em>Figure: Status density plot of ABM simulation throughout all simulation time steps</em></p>
<ol class="arabic simple" start="2">
<li><p>Visualize agent locations on the map:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plot_agents_scatter</span><span class="p">(</span><span class="s2">&quot;simulation_output.h5&quot;</span><span class="p">,</span> <span class="n">town_graph_path</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/SEIR_scatter_plot.png"><img alt="Scatter plot of agents with each status in different location at day 29 in the simulation" class="align-center" src="_images/SEIR_scatter_plot.png" style="width: 750px;" />
</a>
<p><em>Figure: Scatter plot of agents with each status in different location at day 29 in the simulation</em></p>
</section>
<section id="comparing-with-ode-solution-seir-example">
<h2>Comparing with ODE Solution (SEIR Example)<a class="headerlink" href="#comparing-with-ode-solution-seir-example" title="Link to this heading"></a></h2>
<p>You can compare your simulation to a standard ODE solution by using <cite>scipy.integrate</cite>. Here is an ODE system of
the SEIR infection model that also governs the agent interaction and contagion dynamic in our ABM simulation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.integrate</span><span class="w"> </span><span class="kn">import</span> <span class="n">solve_ivp</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="k">def</span><span class="w"> </span><span class="nf">rhs_func</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">S</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">R</span> <span class="o">=</span> <span class="n">y</span>
    <span class="n">N</span> <span class="o">=</span> <span class="n">S</span> <span class="o">+</span> <span class="n">E</span> <span class="o">+</span> <span class="n">I</span> <span class="o">+</span> <span class="n">R</span>
    <span class="n">rhs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">rhs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">model_params</span><span class="o">.</span><span class="n">beta</span> <span class="o">*</span> <span class="n">S</span> <span class="o">*</span> <span class="n">I</span> <span class="o">/</span> <span class="n">N</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">model_params</span><span class="o">.</span><span class="n">xi</span> <span class="o">*</span> <span class="n">R</span>
    <span class="n">rhs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_params</span><span class="o">.</span><span class="n">beta</span> <span class="o">*</span> <span class="n">S</span> <span class="o">*</span> <span class="n">I</span> <span class="o">/</span> <span class="n">N</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">model_params</span><span class="o">.</span><span class="n">sigma</span> <span class="o">*</span> <span class="n">E</span>
    <span class="n">rhs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">model_params</span><span class="o">.</span><span class="n">sigma</span> <span class="o">*</span> <span class="n">E</span> <span class="o">-</span> <span class="mi">1</span><span class="o">/</span><span class="n">model_params</span><span class="o">.</span><span class="n">gamma</span> <span class="o">*</span> <span class="n">I</span>
    <span class="n">rhs</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">model_params</span><span class="o">.</span><span class="n">gamma</span> <span class="o">*</span> <span class="n">I</span> <span class="o">-</span> <span class="mi">1</span><span class="o">/</span><span class="n">model_params</span><span class="o">.</span><span class="n">xi</span> <span class="o">*</span> <span class="n">R</span>
    <span class="k">return</span> <span class="n">rhs</span>

<span class="n">t_end</span> <span class="o">=</span> <span class="mi">82</span>
<span class="n">t_span</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t_end</span><span class="p">)</span>
<span class="n">y0</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.99</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># 1000 pop, 10 infected, 990 susceptible</span>
<span class="n">t_eval</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t_end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">sol</span> <span class="o">=</span> <span class="n">solve_ivp</span><span class="p">(</span>
    <span class="n">rhs_func</span><span class="p">,</span>
    <span class="n">t_span</span><span class="p">,</span>
    <span class="n">y0</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s1">&#39;RK45&#39;</span><span class="p">,</span>
    <span class="n">t_eval</span><span class="o">=</span><span class="n">t_eval</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">sol</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;S&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">sol</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;E&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">sol</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">sol</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Density&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Solution of ODE&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>This is the result of the plot produced by solving this ODE system. You can see that agent-based modelling produced the same kind of
pattern emergence as the ODE system predict with some randomness included.</p>
<a class="reference internal image-reference" href="_images/ODE_SEIR_plot.png"><img alt="Result of ODE-based SEIR simulation" class="align-center" src="_images/ODE_SEIR_plot.png" style="width: 500px;" />
</a>
<p><em>Figure: Result of ODE-based SEIR simulation</em></p>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Explore other models: SEIsIrR, SEIQRDV, or define your own by subclassing <cite>AbstractInfectionModel</cite>.</p></li>
<li><p>Customize step events for your scenario.</p></li>
<li><p>See the API documentation for advanced usage.</p></li>
</ul>
<p>For more details, see the full documentation and examples in the <cite>examples/</cite> folder.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="simcronomicon documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="basic_blocks.html" class="btn btn-neutral float-right" title="Understanding Agent Behavior and Simulation Flow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Warisa Roongaraya.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>